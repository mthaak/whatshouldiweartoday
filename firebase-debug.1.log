[debug] [2025-04-20T22:11:26.693Z] ----------------------------------------------------------------------
[debug] [2025-04-20T22:11:26.698Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\Martin\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions
[debug] [2025-04-20T22:11:26.698Z] CLI Version:   14.2.0
[debug] [2025-04-20T22:11:26.698Z] Platform:      win32
[debug] [2025-04-20T22:11:26.699Z] Node Version:  v20.19.0
[debug] [2025-04-20T22:11:26.699Z] Time:          Sun Apr 20 2025 23:11:26 GMT+0100 (British Summer Time)
[debug] [2025-04-20T22:11:26.699Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-04-20T22:11:26.961Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-04-20T22:11:26.963Z] > authorizing via signed-in user (martin.ter.haak@gmail.com)
[debug] [2025-04-20T22:11:26.963Z] [iam] checking project whatshouldiweartoday-e1a4b for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-04-20T22:11:26.966Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:26.966Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:26.967Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b:testIamPermissions [none]
[debug] [2025-04-20T22:11:26.968Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b:testIamPermissions x-goog-quota-user=projects/whatshouldiweartoday-e1a4b
[debug] [2025-04-20T22:11:26.968Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-04-20T22:11:27.720Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b:testIamPermissions 200
[debug] [2025-04-20T22:11:27.720Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-04-20T22:11:27.721Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:27.721Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:27.721Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/serviceAccounts/whatshouldiweartoday-e1a4b@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-04-20T22:11:27.721Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/serviceAccounts/whatshouldiweartoday-e1a4b@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-04-20T22:11:28.365Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/serviceAccounts/whatshouldiweartoday-e1a4b@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-04-20T22:11:28.365Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/serviceAccounts/whatshouldiweartoday-e1a4b@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'whatshouldiweartoday-e1a4b'...
[info] 
[info] i  deploying functions 
[debug] [2025-04-20T22:11:28.370Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:28.370Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:28.370Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b [none]
[debug] [2025-04-20T22:11:28.572Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b 200
[debug] [2025-04-20T22:11:28.572Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b {"projectNumber":"17607078543","projectId":"whatshouldiweartoday-e1a4b","lifecycleState":"ACTIVE","name":"whatshouldiweartoday","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-04-20T16:56:29.165382Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[debug] [2025-04-20T22:11:28.575Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:28.575Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:28.575Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:28.575Z] Checked if tokens are valid: true, expires at: 1745189695545
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[debug] [2025-04-20T22:11:28.576Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:28.576Z] Checked if tokens are valid: true, expires at: 1745189695545
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-04-20T22:11:28.577Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:28.577Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:28.577Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/cloudfunctions.googleapis.com [none]
[debug] [2025-04-20T22:11:28.577Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/whatshouldiweartoday-e1a4b
[debug] [2025-04-20T22:11:28.580Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/runtimeconfig.googleapis.com [none]
[debug] [2025-04-20T22:11:28.580Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/whatshouldiweartoday-e1a4b
[debug] [2025-04-20T22:11:28.582Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/cloudbuild.googleapis.com [none]
[debug] [2025-04-20T22:11:28.582Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/cloudbuild.googleapis.com x-goog-quota-user=projects/whatshouldiweartoday-e1a4b
[debug] [2025-04-20T22:11:28.584Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/artifactregistry.googleapis.com [none]
[debug] [2025-04-20T22:11:28.584Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/artifactregistry.googleapis.com x-goog-quota-user=projects/whatshouldiweartoday-e1a4b
[debug] [2025-04-20T22:11:29.390Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/artifactregistry.googleapis.com 200
[debug] [2025-04-20T22:11:29.390Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/artifactregistry.googleapis.com [omitted]
[info] +  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2025-04-20T22:11:29.391Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/runtimeconfig.googleapis.com 200
[debug] [2025-04-20T22:11:29.392Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/runtimeconfig.googleapis.com [omitted]
[debug] [2025-04-20T22:11:29.394Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/cloudfunctions.googleapis.com 200
[debug] [2025-04-20T22:11:29.395Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/cloudfunctions.googleapis.com [omitted]
[info] +  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2025-04-20T22:11:29.402Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/cloudbuild.googleapis.com 200
[debug] [2025-04-20T22:11:29.403Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/cloudbuild.googleapis.com [omitted]
[info] +  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2025-04-20T22:11:29.403Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:29.403Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:29.403Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/whatshouldiweartoday-e1a4b/adminSdkConfig [none]
[debug] [2025-04-20T22:11:29.644Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/whatshouldiweartoday-e1a4b/adminSdkConfig 200
[debug] [2025-04-20T22:11:29.644Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/whatshouldiweartoday-e1a4b/adminSdkConfig {"projectId":"whatshouldiweartoday-e1a4b","storageBucket":"whatshouldiweartoday-e1a4b.firebasestorage.app"}
[debug] [2025-04-20T22:11:29.645Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:29.645Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:29.646Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/whatshouldiweartoday-e1a4b/configs [none]
[debug] [2025-04-20T22:11:29.922Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/whatshouldiweartoday-e1a4b/configs 200
[debug] [2025-04-20T22:11:29.922Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/whatshouldiweartoday-e1a4b/configs {}
[debug] [2025-04-20T22:11:29.927Z] Validating nodejs source
[warn] !  functions: Runtime Node.js 18 will be deprecated on 2025-04-30 and will be decommissioned on 2025-10-31, after which you will not be able to deploy without upgrading. Consider upgrading now to avoid disruption. See https://cloud.google.com/functions/docs/runtime-support for full details on the lifecycle policy 
[debug] [2025-04-20T22:11:31.075Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "build": "tsc",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "tsc && firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "build/src/index.js",
  "dependencies": {
    "expo-server-sdk": "^3.7.0",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^6.3.2"
  },
  "devDependencies": {
    "@types/node": "^18.0.0",
    "typescript": "^4.9.0",
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4"
  },
  "private": true
}
[debug] [2025-04-20T22:11:31.075Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2025-04-20T22:11:31.076Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-04-20T22:11:31.089Z] Found firebase-functions binary at 'C:\Users\Martin\Projects\whatshouldiweartoday\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8035

[debug] [2025-04-20T22:11:31.592Z] Got response from /__/functions.yaml {"endpoints":{"registerPushToken":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"registerPushToken"},"scheduleNotification":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"scheduleTrigger":{"schedule":"0 8 * * *","retryConfig":{},"timeZone":"Europe/London"},"entryPoint":"scheduleNotification"}},"specVersion":"v1alpha1","requiredAPIs":[{"api":"cloudscheduler.googleapis.com","reason":"Needed for scheduled functions."}],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-04-20T22:11:35.637Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:35.637Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:35.638Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/firebaseextensions.googleapis.com [none]
[debug] [2025-04-20T22:11:35.638Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/firebaseextensions.googleapis.com x-goog-quota-user=projects/whatshouldiweartoday-e1a4b
[debug] [2025-04-20T22:11:36.502Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/firebaseextensions.googleapis.com 200
[debug] [2025-04-20T22:11:36.502Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/firebaseextensions.googleapis.com [omitted]
[info] +  extensions: required API firebaseextensions.googleapis.com is enabled 
[debug] [2025-04-20T22:11:36.502Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-04-20T22:11:36.503Z] > authorizing via signed-in user (martin.ter.haak@gmail.com)
[debug] [2025-04-20T22:11:36.503Z] [iam] checking project whatshouldiweartoday-e1a4b for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-04-20T22:11:36.503Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:36.503Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:36.504Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b:testIamPermissions [none]
[debug] [2025-04-20T22:11:36.504Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b:testIamPermissions x-goog-quota-user=projects/whatshouldiweartoday-e1a4b
[debug] [2025-04-20T22:11:36.504Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-04-20T22:11:37.157Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b:testIamPermissions 200
[debug] [2025-04-20T22:11:37.157Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-04-20T22:11:37.158Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:37.158Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:37.159Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/whatshouldiweartoday-e1a4b/instances pageSize=100&pageToken=
[debug] [2025-04-20T22:11:37.886Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/whatshouldiweartoday-e1a4b/instances 200
[debug] [2025-04-20T22:11:37.887Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/whatshouldiweartoday-e1a4b/instances {}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged C:\Users\Martin\Projects\whatshouldiweartoday\functions (63.3 KB) for uploading 
[debug] [2025-04-20T22:11:37.960Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:37.961Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:37.961Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/locations/-/functions [none]
[debug] [2025-04-20T22:11:38.565Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/locations/-/functions 200
[debug] [2025-04-20T22:11:38.565Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/locations/-/functions {}
[debug] [2025-04-20T22:11:38.566Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:38.566Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:38.566Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/whatshouldiweartoday-e1a4b/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-04-20T22:11:39.535Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/whatshouldiweartoday-e1a4b/locations/-/functions 200
[debug] [2025-04-20T22:11:39.535Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/whatshouldiweartoday-e1a4b/locations/-/functions {"functions":[{"name":"projects/whatshouldiweartoday-e1a4b/locations/us-central1/functions/registerPushToken","buildConfig":{"build":"projects/17607078543/locations/us-central1/builds/7417976b-9e79-4cf5-9b78-fabae0fd505b","runtime":"nodejs18","entryPoint":"registerPushToken","source":{"storageSource":{"bucket":"gcf-v2-sources-17607078543-us-central1","object":"registerPushToken/function-source.zip","generation":"1745187051276658"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/whatshouldiweartoday-e1a4b/locations/us-central1/repositories/gcf-artifacts","serviceAccount":"projects/whatshouldiweartoday-e1a4b/serviceAccounts/17607078543-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/whatshouldiweartoday-e1a4b/locations/us-central1/services/registerpushtoken","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"whatshouldiweartoday-e1a4b\",\"storageBucket\":\"whatshouldiweartoday-e1a4b.firebasestorage.app\"}","GCLOUD_PROJECT":"whatshouldiweartoday-e1a4b","EVENTARC_CLOUD_EVENT_SOURCE":"projects/whatshouldiweartoday-e1a4b/locations/us-central1/services/registerPushToken","FUNCTION_TARGET":"registerPushToken","LOG_EXECUTION_ID":"true"},"maxInstanceCount":40,"ingressSettings":"ALLOW_ALL","uri":"https://registerpushtoken-k6fgs3zd4a-uc.a.run.app","serviceAccountEmail":"17607078543-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"registerpushtoken-00003-taw","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"DEPLOYING","updateTime":"2025-04-20T22:10:51.322833421Z","labels":{"deployment-callable":"true","firebase-functions-hash":"07837a2d08ec7668f8892677be074d0e2a2925f4","deployment-tool":"cli-firebase"},"environment":"GEN_2","url":"https://us-central1-whatshouldiweartoday-e1a4b.cloudfunctions.net/registerPushToken","createTime":"2025-04-20T20:08:21.589782380Z","satisfiesPzi":true},{"name":"projects/whatshouldiweartoday-e1a4b/locations/us-central1/functions/scheduleNotification","buildConfig":{"build":"projects/17607078543/locations/us-central1/builds/7417976b-9e79-4cf5-9b78-fabae0fd505b","runtime":"nodejs18","entryPoint":"scheduleNotification","source":{"storageSource":{"bucket":"gcf-v2-sources-17607078543-us-central1","object":"scheduleNotification/function-source.zip","generation":"1745187094565816"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/whatshouldiweartoday-e1a4b/locations/us-central1/repositories/gcf-artifacts","serviceAccount":"projects/whatshouldiweartoday-e1a4b/serviceAccounts/17607078543-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/whatshouldiweartoday-e1a4b/locations/us-central1/services/schedulenotification","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"whatshouldiweartoday-e1a4b\",\"storageBucket\":\"whatshouldiweartoday-e1a4b.firebasestorage.app\"}","GCLOUD_PROJECT":"whatshouldiweartoday-e1a4b","EVENTARC_CLOUD_EVENT_SOURCE":"projects/whatshouldiweartoday-e1a4b/locations/us-central1/services/scheduleNotification","FUNCTION_TARGET":"scheduleNotification","LOG_EXECUTION_ID":"true","FUNCTION_SIGNATURE_TYPE":"http"},"maxInstanceCount":40,"ingressSettings":"ALLOW_ALL","uri":"https://schedulenotification-k6fgs3zd4a-uc.a.run.app","serviceAccountEmail":"17607078543-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"schedulenotification-00003-kob","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"DEPLOYING","updateTime":"2025-04-20T22:11:34.605921705Z","labels":{"deployment-scheduled":"true","firebase-functions-hash":"07837a2d08ec7668f8892677be074d0e2a2925f4","deployment-tool":"cli-firebase"},"environment":"GEN_2","url":"https://us-central1-whatshouldiweartoday-e1a4b.cloudfunctions.net/scheduleNotification","createTime":"2025-04-20T20:09:35.780136719Z","satisfiesPzi":true}]}
[info] i  functions: ensuring required API cloudscheduler.googleapis.com is enabled... 
[debug] [2025-04-20T22:11:39.543Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:39.543Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:39.544Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/cloudscheduler.googleapis.com [none]
[debug] [2025-04-20T22:11:39.544Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/cloudscheduler.googleapis.com x-goog-quota-user=projects/whatshouldiweartoday-e1a4b
[debug] [2025-04-20T22:11:40.354Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/cloudscheduler.googleapis.com 200
[debug] [2025-04-20T22:11:40.354Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/cloudscheduler.googleapis.com [omitted]
[info] +  functions: required API cloudscheduler.googleapis.com is enabled 
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[debug] [2025-04-20T22:11:40.355Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:40.355Z] Checked if tokens are valid: true, expires at: 1745189695545
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[debug] [2025-04-20T22:11:40.356Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:40.356Z] Checked if tokens are valid: true, expires at: 1745189695545
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[debug] [2025-04-20T22:11:40.356Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:40.357Z] Checked if tokens are valid: true, expires at: 1745189695545
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[debug] [2025-04-20T22:11:40.357Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:40.357Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:40.357Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/run.googleapis.com [none]
[debug] [2025-04-20T22:11:40.357Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/run.googleapis.com x-goog-quota-user=projects/whatshouldiweartoday-e1a4b
[debug] [2025-04-20T22:11:40.358Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/eventarc.googleapis.com [none]
[debug] [2025-04-20T22:11:40.358Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/eventarc.googleapis.com x-goog-quota-user=projects/whatshouldiweartoday-e1a4b
[debug] [2025-04-20T22:11:40.362Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/pubsub.googleapis.com [none]
[debug] [2025-04-20T22:11:40.362Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/pubsub.googleapis.com x-goog-quota-user=projects/whatshouldiweartoday-e1a4b
[debug] [2025-04-20T22:11:40.365Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/storage.googleapis.com [none]
[debug] [2025-04-20T22:11:40.365Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/storage.googleapis.com x-goog-quota-user=projects/whatshouldiweartoday-e1a4b
[debug] [2025-04-20T22:11:40.739Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/run.googleapis.com 200
[debug] [2025-04-20T22:11:40.739Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/run.googleapis.com [omitted]
[info] +  functions: required API run.googleapis.com is enabled 
[debug] [2025-04-20T22:11:41.192Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/pubsub.googleapis.com 200
[debug] [2025-04-20T22:11:41.192Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/pubsub.googleapis.com [omitted]
[info] +  functions: required API pubsub.googleapis.com is enabled 
[debug] [2025-04-20T22:11:41.210Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/storage.googleapis.com 200
[debug] [2025-04-20T22:11:41.210Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/storage.googleapis.com [omitted]
[info] +  functions: required API storage.googleapis.com is enabled 
[debug] [2025-04-20T22:11:41.308Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/eventarc.googleapis.com 200
[debug] [2025-04-20T22:11:41.308Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/services/eventarc.googleapis.com [omitted]
[info] +  functions: required API eventarc.googleapis.com is enabled 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[debug] [2025-04-20T22:11:41.310Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:41.311Z] Checked if tokens are valid: true, expires at: 1745189695545
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2025-04-20T22:11:41.311Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:41.312Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:41.312Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/17607078543/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2025-04-20T22:11:41.312Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/17607078543/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2025-04-20T22:11:41.652Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/17607078543/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2025-04-20T22:11:41.653Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/17607078543/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-17607078543@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"117180246529907427108"}}
[debug] [2025-04-20T22:11:42.082Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/17607078543/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2025-04-20T22:11:42.083Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/17607078543/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-17607078543@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"105298781608273039059"}}
[debug] [2025-04-20T22:11:42.086Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:42.086Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:42.086Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b [none]
[debug] [2025-04-20T22:11:42.283Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b 200
[debug] [2025-04-20T22:11:42.283Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b {"projectNumber":"17607078543","projectId":"whatshouldiweartoday-e1a4b","lifecycleState":"ACTIVE","name":"whatshouldiweartoday","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-04-20T16:56:29.165382Z"}
[debug] [2025-04-20T22:11:42.286Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:42.286Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:42.286Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/billingInfo [none]
[debug] [2025-04-20T22:11:42.949Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/billingInfo 200
[debug] [2025-04-20T22:11:42.949Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/billingInfo {"name":"projects/whatshouldiweartoday-e1a4b/billingInfo","projectId":"whatshouldiweartoday-e1a4b","billingAccountName":"billingAccounts/011BB2-021DC5-98AEC9","billingEnabled":true}
[info] i  functions: updating Node.js 18 (2nd Gen) function registerPushToken(us-central1)... 
[debug] [2025-04-20T22:11:42.956Z] Precondition failed. Cannot update a GCFv2 function without storage
[info] i  functions: updating Node.js 18 (2nd Gen) function scheduleNotification(us-central1)... 
[debug] [2025-04-20T22:11:42.957Z] Precondition failed. Cannot update a GCFv2 function without storage
[debug] [2025-04-20T22:11:42.969Z] Total Function Deployment time: 3
[debug] [2025-04-20T22:11:42.969Z] 2 Functions Deployed
[debug] [2025-04-20T22:11:42.969Z] 2 Functions Errored
[debug] [2025-04-20T22:11:42.969Z] 0 Function Deployments Aborted
[debug] [2025-04-20T22:11:42.969Z] Average Function Deployment time: 1
[info] 
[info] Functions deploy had errors with the following functions:
	registerPushToken(us-central1)
	scheduleNotification(us-central1)
[debug] [2025-04-20T22:11:43.096Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:43.096Z] Checked if tokens are valid: true, expires at: 1745189695545
[debug] [2025-04-20T22:11:43.097Z] >>> [apiv2][query] GET https://artifactregistry.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/locations/us-central1/repositories/gcf-artifacts [none]
[debug] [2025-04-20T22:11:43.881Z] <<< [apiv2][status] GET https://artifactregistry.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/locations/us-central1/repositories/gcf-artifacts 200
[debug] [2025-04-20T22:11:43.882Z] <<< [apiv2][body] GET https://artifactregistry.googleapis.com/v1/projects/whatshouldiweartoday-e1a4b/locations/us-central1/repositories/gcf-artifacts {"name":"projects/whatshouldiweartoday-e1a4b/locations/us-central1/repositories/gcf-artifacts","format":"DOCKER","description":"This repository is created and used by Cloud Functions for storing function docker images.","labels":{"goog-managed-by":"cloudfunctions"},"createTime":"2025-04-20T20:08:30.300394Z","updateTime":"2025-04-20T22:11:19.152671Z","mode":"STANDARD_REPOSITORY","cleanupPolicies":{"firebase-functions-cleanup":{"id":"firebase-functions-cleanup","action":"DELETE","condition":{"tagState":"ANY","olderThan":"86400s"}}},"sizeBytes":"109406017","vulnerabilityScanningConfig":{"lastEnableTime":"2025-04-20T20:08:21.791429562Z","enablementState":"SCANNING_DISABLED","enablementStateReason":"API containerscanning.googleapis.com is not enabled."},"satisfiesPzi":true,"registryUri":"us-central1-docker.pkg.dev/whatshouldiweartoday-e1a4b/gcf-artifacts"}
[debug] [2025-04-20T22:11:43.883Z] Functions deploy failed.
[debug] [2025-04-20T22:11:43.883Z] {}
[debug] [2025-04-20T22:11:43.883Z] {}
[error] Error: There was an error deploying functions:
[error] - Error Precondition failed
[error] - Error Precondition failed
